# sails-dynamic-assets

I have decided to not use the sails default importer. Mostly because I find it bad, too much based on configuration over convention. So I have made my own dynamic assets loader based on convention over configuration.

Basically, in mine, there is nothing more to do, the assets will be applied based on the controller, controller action, theme and layout used.

I use LESS, but I decided to make it *convention over configuration*. I don't need to manually call each LESS asset like in the sails `importer.less`.

Interesting files to look at:

- views/_layouts/default.ejs
- views/_layouts/_partials/_body.ejs
- assets/linker/styles/themes/default.less
- assets/linker/styles/layouts/default.less
- assets/linker/styles/common/buttons.less
- assets/linker/styles/views/home.less
- assets/linker/styles/views/user.less

There are a lot of files in the linker/styles because I copied and pasted this project from a real one, you can take a look at all of them if you want.
I've setup an inheritance between my own files and bootstrap, so I am able to override bootstrap classes and extends them, as well as for font-awesome.

## LESS
I configured LESS for the project using `WebStorm` IDE, just added a watcher to compile LESS files within the project on file change. (Excepted the `assets/less` folder which contains libraries that we don't need to compile).

The `.gitattributes` file is here to force git to use `LF` line separator whatever the your environment is, it's because LESS always compile in *LF*, whatever the git config is.
So it mess up git if you're using *CLRF* (Windows) because it flags files as modified that aren't.

Since all our `css` are generated, we need to push them only because they won't be regenerated by grunt (would take time,
I prefer to work faster and recompile files on change rather than recompiling every file on project start).
The compilation of bootstrap and font-awesome would take time if it were done every time.

It is possible to do as you prefer, that's my way. Using grunt would be a possibility too, and in this case you wouldn't need to track .css files.

